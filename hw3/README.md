# Домашнее задание №2

**Дедлайны**: 2018.09.21 23:59 (мягкий), 2018.09.25 12:10 (жесткий)

## Задачи

#### 1. Переменная

На место многоточия в команду

    grep -Ps "..." <<< "$1"

вписать регулярное выражение, принимающее объявление переменных в формате

    TypeInCamelCase varInCamelCase;

Примечания:
* Имя переменной может начинаться только с маленькой латинской буквы или с `m_`.
* Имя переменной может заканчиваться символом `_`.
* Имя типа может начинаться только с большой латинской буквы.
* Допустимые символы внутри имен — цифры и латинские буквы.
* Между именем типа и именем переменной не менее одного пробельного символа; пробельных символов в других местах строки быть не может.
* Регулярное выражение должно либо принимать все строку целиком, либо отвергать ее.
* Менять можно только многоточие, никаких новых ключей добавлять нельзя.

#### 2. СКС

Вам доверено написать межсетевой экран на одном высоконагруженном сервере. Он будет представлен в виде `bash` скрипта.
Система контроля сервера (СКС) будет запускать ваш скрипт, и передавать ему в качестве параметра файл, на каждой строчке 
которого через пробел указаны заблокированный домен и протокол. На стандартный ввод скрипта СКС будет посылать адреса страниц, которые хочет 
посетить пользователь. В ответ на каждый запрос необходимо вывести `ALLOW`, если доступ к данному сайту разрешен, 
и `DENY` в противном случае. Важно: домен блокируется вместе со всеми своими поддоменами.

Пример файла:

    www.rutracker.org https
    nescafe.ru https
    www.rutracker.org http

Пример ввода/вывода:

    http://rutracker.org/cnc5                               ALLOW
    http://www.rutracker.org/cnc5                           DENY
    http://ivan:123@yyy.photography:2218/cnc5/1/2/3.html    ALLOW
    http://nescafe.ru/index.php                             ALLOW
    https://v.www.rutracker.org/cnc5                        DENY
    https://yyy.org/cnc5                                    ALLOW
    http://ivan:123@yyy.photography:2218/cnc5               ALLOW

Гарантируется, что в адресе страницы будут только символы из латинского алфавита (оба регистра), цифры, дефисы, точка и косая черта.

Формат URL можно найти [здесь](https://ru.wikipedia.org/wiki/URL#Структура_URL).

#### 3. #include

Дан файл `file.c`, вывести имена (без расширений) всех header-файлов, которые импортируются.

Пример входного файла:

    #include <stdio.h>
    #ifdef DEBUG
        #include "mylib.h"
    #endif
    /*
    #include "mylib2.h"
    */
    
    int main() {
        // #include "comment.h"
        printf("#include <literal.h>");
        return 0;
    }

Ожидаемый вывод:

    stdio
    mylib
    
Примечания:
* Можно считать, что имена header-файлов не содержат переносов строк и находятся на той же строке, что и `#include`.
* Предполагаем, что из команд препроцессора значимая только `#include`, остальные можно игнорировать. Например, нужно вывести `mylib3` в таком коде:
      #if 0
        #include "mylib3.h"
      #endif

#### 4. Телефонная книжка

Имя, Фамилия, Телефон, электронная почта — телефонная книжка в формате csv. 
Преобразовать в html, который можно просматривать в браузере. 
Пользоваться можно только `sed`!

Пример входного файла:

    Имя,Фамилия,Телефон,Почта
    Петр,Иванов,1234567,petya@mail.ru
    Иван,Петров,7654321,ivan@gmail.com

Нужно, чтобы на адрес электронной почты можно было кликнуть, и при этом браузер должен понять, что мы хотим написать этому человеку письмо.

#### 5. man

Напишите скрипт, который будет получать из `man`-страницы только заданный раздел.

Первый аргумент — имя раздела. Остальные аргументы должны быть переданы в `man` без изменений.

```
$ ./название_скрипта AUTHORS 1 ls
Written by Richard M. Stallman and David MacKenzie.
$ ./название_скрипта COPYRIGHT 1 find
Copyright © 1990-2019 Free Software Foundation, Inc.  License GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.  There is NO WARRANTY, to the extent permitted by law.
$ ./название_скрипта ERRORS 2 kill
EINVAL An invalid signal was specified.

EPERM  The process does not have permission to send the signal to any of the target processes.

ESRCH  The process or process group does not exist.  Note that an existing process might be a zombie, a process that has terminated execution, but has not yet been wait(2)ed for.
```

#### 6. Зоопарк

Имеется файл, содержащий сведения о животных в зоопарке:

    id;name;h;strike;color
    1;Chicken;12;0.38;Yellow
    2;Goose;18;0.11;Green
    3;Orca;8;0.81;Yellow
    4;Porcupine;19;0.74;Yellow
    5;Bear;23;0.14;Green
    6;Turtle;4;0.08;Black

Требуется организовать бои без правил. Для этого нужно вывести имя животного (`name`) и тангенс его ударной силы (`strike`). 
При этом интересуют нас только те животные, которые не выбыли из турнира, то есть те, перед которыми в списке было нечетное число животных того же цвета (`color`);

Пример вывода:

    Orca            1.0505
    Bear            0.1409

Примечания:
* Разрешено использовать только `awk`.
* Тангенс нужно выводить с точностью в четыре знака после запятой.

#### 7. Игра

Дмитрий и Алексей играют в игру. Дмитрий дает Алексею csv-файл следующего вида:

    name;text
    Vladimir;aaakaea
    Anastasia;qwqwqw
    Sergei;uiwq]a
    Mikhail;aaaqaa

Алексей в ответ для имен четной длины, начинающихся с согласной, выводит `YES`,
если поле `text` длиннее трёх символов и его можно **одной заменой** преобразовать в палиндром, и `NO` в противном случае.

Пример вывода:

    Vladimir~YES
    Sergei~NO

Алексей просит Вас помочь ему в этой игре.

Примечания:
* Разрешено использовать только `awk`.
* Имя может начинаться только с большой латинской буквы, внутри имени могут встречаться только маленькие латинские буквы.
* В уже готовом палиндроме можно заменить один символ на самого себя и опять получить палиндром.

#### 8. 123-456-789

На месте многоточия необходимо вписать код на Perl, использующий только операции из разделов `Regexp Quote-Like Operators` и `Quote-Like Operators` из `perlop(1perl)`,
который разбивает все длинные числа из переданной строки на группы по 3 цифры, вставляя между группами символ `-`.

    perl -pe '...' <<< "$1"

Если длина числа не делится на 3, то в первой группе может оказаться 1 или 2 цифры.

Пример ввода / вывода:

    123456789                    ->  123-456-789
    1234567                      ->  1-234-567
    123 (123456) 12345           ->  123 (123-456) 12-345
    My password is lol123456kek  ->  My password is lol123456kek

Примечания:
* Числом считается **слово** *(это не косноязычие, а намёк)*, состоящее только из цифр.

#### 9. IP

Требуется вычислить недоброжелателей по IP. Файл `ips.txt` содержит их IP-адреса по одному на строку.
Нужно вывести в `stdout` список городов, в которых находятся недоброжелатели. Для этого можно использовать любые веб-ресурсы в международной распределённой сети Интернет.

Недоброжелателей обычно очень много, поэтому нужно обрабатывать их список эффективно.
К счастью, пока происходит запрос в Интернет, компьютеру не нужно ничего делать, пока
он ждёт ответа, поэтому можно сильно ускорить процесс, если отсылать новые запросы ещё
до того, как получен ответ на все предыдущие. Иначе, поиск недоброжелателей — задача,
которую можно и нужно *распараллеливать*.

Примечания:
* Для получения имени города из ответа от сервера можно использовать только `sed`.
* Для запросов по сети и распараллеливания можно пользоваться чем угодно.
* Некоторые способы распараллеливания могут привести к перемешиванию данных при
  выводе, и это плохо: первому в списке недоброжелателю должен соответствовать
  первый в выводе город.
* Перед отправкой проверьте, что по крайней мере для Вашего IP скрипт выдает правильный город.
